// +========================================+
// |       Besmellah, Alrahman, Alrahim     |
// |              Pro Input JS              |
// |  https://github.com/mehdika2/ProInput  |
// +========================================+
!function(){const c="data-pi-type",l="data-pi-max-length";function p(e,t,n=""){""==n&&(n=c);e=e.getAttribute(n);return e&&!!e.split(" ").includes(t)}const a=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],u=["0","1","2","3","4","5","6","7","8","9"],r=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function s(n){"FORM"===n.nodeName?n.querySelectorAll("input").forEach((e,t)=>{p(e,".farsi")&&s(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),a[t])}),r.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),a[t])}))}function v(n){"FORM"===n.nodeName?n.querySelectorAll("input").forEach((e,t)=>{p(e,".english")&&v(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(a.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),u[t])}),r.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),u[t])}))}function g(n){"FORM"===n.nodeName?n.querySelectorAll("input").forEach((e,t)=>{p(e,".arabic")&&g(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),r[t])}),a.forEach((e,t)=>{n.value=n.value.replace(new RegExp(e,"g"),r[t])}))}window.submit=function(){document.querySelector("form").submit()},window.ProInputInit=function(r){const o=document.querySelectorAll("input"),e=[],t=HTMLFormElement.prototype.submit;function n(e){var t=e.target,n=t.getAttribute("data-pi-allowed")??"";t.value=t.value.replaceAll(new RegExp(`[^\\u06F0-\\u06F9\\u0660-\\u06690-9${n}]`,"g"),""),i(e)}function i(e){var t,e=e.target,n=e.selectionEnd,a=e.value.length;p(e,"farsi")?s(e):p(e,"arabic")?g(e):p(e,"english")&&v(e),p(e,"separate")&&(e.value=[...[...e.value.replaceAll(",","")].reverse().join("").replace(/(.{3})/g,"$1,").replace(/,\s*$/,"")].reverse().join("")),e.hasAttribute(l)&&(p(e,"separate")?e.value.replaceAll(",","").length>Number(e.getAttribute(l)):e.value.length>Number(e.getAttribute(l)))&&(e.value=e.value.substring(0,e.value.length-1),t=o[e.tabIndex])&&(t.focus(),t.select()),e.selectionEnd=e.value.length-a+n,e.selectionStart=e.selectionEnd}HTMLFormElement.prototype.submit=function(){e.forEach(function(e){s(e),v(e),g(e)}),t.call(this)},o.forEach((a,l)=>{a.tabIndex=l+1;const u=a.closest("form");null!=a.getAttribute(c)&&a.getAttribute(c).match(/\.\w+/g)&&!e.includes(u)&&e.push(u),p(a,"onlynumber")?(a.addEventListener("input",n),i({target:a})):p(a,"number")&&(a.addEventListener("input",i),i({target:a})),(p(a,"backjump")||p(a,"jump"))&&a.addEventListener("keydown",e=>{var t,n;p(a,"backjump")&&"Backspace"===e.key&&""===a.value&&0<l&&((t=o[l-1]).focus(),n=(t=t).value.length,t.setSelectionRange(n,n),t.focus(),e.preventDefault()),!p(a,"jump")||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),function e(t,n){const a=o[n+1];if(a){const l=window.getComputedStyle(a);"none"===l.display||"hidden"===l.visibility||"0"===l.opacity||"hidden"==a.type?e(t,n+1):a.focus()}else"function"==typeof r?0==r()&&t.submit():t&&t.submit()}(u,l))})}),e.forEach(function(t){t.addEventListener("submit",e=>{s(t),v(t),g(t)})})},window.toPersian=s,window.toEnglish=v,window.toArabic=g}();
