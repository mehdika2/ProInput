// +========================================+
// |       Besmellah, Alrahman, Alrahim     |
// |              Pro Input JS              |
// |  https://github.com/mehdika2/ProInput  |
// +========================================+
!function(){const i="data-pi-type",n="data-pi-max-length";function p(e,t,a=""){""==a&&(a=i);e=e.getAttribute(a);return e&&!!e.split(" ").includes(t)}const l=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],u=["0","1","2","3","4","5","6","7","8","9"],r=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function s(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".farsi")&&s(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),l[t])}),r.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),l[t])}))}function v(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".english")&&v(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(l.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}),r.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}))}function g(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".arabic")&&g(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),r[t])}),l.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),r[t])}))}window.submit=function(){document.querySelector("form").submit()},window.ProInputInit=function(r){const o=document.querySelectorAll("input"),e=[],t=HTMLFormElement.prototype.submit;function a(e){var t=e.target,a=t.getAttribute("data-pi-allowed")??"";t.value=t.value.replaceAll(new RegExp(`[^\\u06F0-\\u06F9\\u0660-\\u06690-9${a}]`,"g"),""),c(e)}function c(e){var t,e=e.target,a=e.selectionEnd,l=e.value.length;p(e,"farsi")?s(e):p(e,"arabic")?g(e):p(e,"english")&&v(e),p(e,"separate")&&(e.value=[...[...e.value.replaceAll(",","")].reverse().join("").replace(/(.{3})/g,"$1,").replace(/,\s*$/,"")].reverse().join("")),e.hasAttribute(n)&&(p(e,"separate")?e.value.replaceAll(",","").length>=Number(e.getAttribute(n)):e.value.length>=Number(e.getAttribute(n)))&&(e.value=e.value.substring(0,e.value.length-1),t=o[e.tabIndex])&&(t.focus(),t.select()),e.selectionEnd=e.value.length-l+a,e.selectionStart=e.selectionEnd}HTMLFormElement.prototype.submit=function(){e.forEach(function(e){s(e),v(e),g(e)}),t.call(this)},o.forEach((l,n)=>{l.tabIndex=n+1;const u=l.closest("form");null!=l.getAttribute(i)&&l.getAttribute(i).match(/\.\w+/g)&&!e.includes(u)&&e.push(u),p(l,"onlynumber")?(l.addEventListener("input",a),c({target:l})):p(l,"number")&&(l.addEventListener("input",c),c({target:l})),(p(l,"backjump")||p(l,"jump"))&&l.addEventListener("keydown",e=>{var t,a;p(l,"backjump")&&"Backspace"===e.key&&""===l.value&&0<n&&((t=o[n-1]).focus(),a=(t=t).value.length,t.setSelectionRange(a,a),t.focus(),e.preventDefault()),!p(l,"jump")||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),(a=o[n+1])?a.focus():"function"!=typeof r||0!=r()&&!u||u.submit())})})},window.toPersian=s,window.toEnglish=v,window.toArabic=g}();
