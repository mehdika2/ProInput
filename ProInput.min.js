// +========================================+
// |       Besmellah, Alrahman, Alrahim     |
// |              Pro Input JS              |
// |  https://github.com/mehdika2/ProInput  |
// +========================================+
!function(){const c="data-pi-type",l="data-pi-max-length";function p(e,t,a=""){""==a&&(a=c);e=e.getAttribute(a);return e&&!!e.split(" ").includes(t)}const n=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],u=["0","1","2","3","4","5","6","7","8","9"],r=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function s(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".farsi")&&s(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),n[t])}),r.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),n[t])}))}function v(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".english")&&v(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(n.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}),r.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}))}function g(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".arabic")&&g(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),r[t])}),n.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),r[t])}))}window.submit=function(){document.querySelector("form").submit()},window.ProInputInit=function(r){const o=document.querySelectorAll("input"),e=[],t=HTMLFormElement.prototype.submit;function a(e){var t=e.target,a=t.getAttribute("data-pi-allowed")??"";t.value=t.value.replaceAll(new RegExp(`[^\\u06F0-\\u06F9\\u0660-\\u06690-9${a}]`,"g"),""),i(e)}function i(e){var t,e=e.target,a=e.selectionEnd,n=e.value.length;p(e,"farsi")?s(e):p(e,"arabic")?g(e):p(e,"english")&&v(e),p(e,"separate")&&(e.value=[...[...e.value.replaceAll(",","")].reverse().join("").replace(/(.{3})/g,"$1,").replace(/,\s*$/,"")].reverse().join("")),e.hasAttribute(l)&&(p(e,"separate")?e.value.replaceAll(",","").length>Number(e.getAttribute(l)):e.value.length>Number(e.getAttribute(l)))&&(e.value=e.value.substring(0,e.value.length-1),t=o[e.tabIndex])&&(t.focus(),t.select()),e.selectionEnd=e.value.length-n+a,e.selectionStart=e.selectionEnd}HTMLFormElement.prototype.submit=function(){e.forEach(function(e){s(e),v(e),g(e)}),t.call(this)},o.forEach((n,l)=>{n.tabIndex=l+1;const u=n.closest("form");null!=n.getAttribute(c)&&n.getAttribute(c).match(/\.\w+/g)&&!e.includes(u)&&e.push(u),p(n,"onlynumber")?(n.addEventListener("input",a),i({target:n})):p(n,"number")&&(n.addEventListener("input",i),i({target:n})),(p(n,"backjump")||p(n,"jump"))&&n.addEventListener("keydown",e=>{var t,a;p(n,"backjump")&&"Backspace"===e.key&&""===n.value&&0<l&&((t=o[l-1]).focus(),a=(t=t).value.length,t.setSelectionRange(a,a),t.focus(),e.preventDefault()),!p(n,"jump")||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),function e(t,a){const n=o[a+1];if(n){const l=window.getComputedStyle(n);"none"===l.display||"hidden"===l.visibility||"0"===l.opacity||"hidden"==n.type?e(t,a+1):n.focus()}else"function"==typeof r?0==r()&&t.submit():t&&t.submit()}(u,l))})})},window.toPersian=s,window.toEnglish=v,window.toArabic=g}();
