// +========================================+
// |       Besmellah, Alrahman, Alrahim     |
// |              Pro Input JS              |
// |  https://github.com/mehdika2/ProInput  |
// +========================================+
!function(){const r="data-pi-type",t="data-pi-max-length";function c(e,a,t=""){""==t&&(t=r);e=e.getAttribute(t);return!(!e||e.indexOf(a)<0)}const n=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],l=["0","1","2","3","4","5","6","7","8","9"],u=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function i(t){"FORM"===t.nodeName?t.querySelectorAll("input").forEach((e,a)=>{c(e,".format")&&i(e),c(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(l.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),n[a])}),u.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),n[a])}))}function p(t){"FORM"===t.nodeName?t.querySelectorAll("input").forEach((e,a)=>{c(e,".format")&&p(e),c(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(n.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),l[a])}),u.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),l[a])}))}function f(t){"FORM"===t.nodeName?t.querySelectorAll("input").forEach((e,a)=>{c(e,".format")&&f(e),c(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(l.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),u[a])}),n.forEach((e,a)=>{t.value=t.value.replace(new RegExp(e,"g"),u[a])}))}window.submit=function(){document.querySelector("form").submit()},window.ProInputInit=function(l){var e=document.querySelectorAll("form");const u=document.querySelectorAll("input");function a(e){var a=e.target,t=a.getAttribute("data-pi-allowed")??"";a.value=a.value.replaceAll(new RegExp(`[^\\u06F0-\\u06F9\\u0660-\\u06690-9${t}]`,"g"),""),o(e)}function o(e){var e=e.target;c(e,"farsi")?i(e):c(e,"arabic")?f(e):c(e,"english")&&p(e),c(e,"separate")&&(e.value=[...[...e.value.replaceAll(",","")].reverse().join("").replace(/(.{3})/g,"$1,").replace(/,\s*$/,"")].reverse().join("")),e.hasAttribute(t)&&e.value.replaceAll(",","").length>=Number(e.getAttribute(t))&&(e=u[e.tabIndex])&&(e.focus(),e.select())}e.forEach((a,e)=>{a.addEventListener("submit",function(e){e.preventDefault(),c(a,".format")&&(c(a,"farsi")?i(a):c(a,"arabic")?f(a):c(a,"english")&&p(a))})}),u.forEach((r,n)=>{r.tabIndex=n+1,c(r,"onlynumber")?r.addEventListener("input",a):c(r,"number")&&r.addEventListener("input",o),(c(r,"backjump")||c(r,"jump"))&&r.addEventListener("keydown",e=>{var a,t;c(r,"backjump")&&"Backspace"===e.key&&""===r.value&&0<n&&((a=u[n-1]).focus(),t=(a=a).value.length,a.setSelectionRange(t,t),a.focus(),e.preventDefault()),!c(r,"jump")||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),(t=u[n+1])?t.focus():"function"!=typeof l||0!=l()&&!form||form.submit())})})},window.toPersian=i,window.toEnglish=p,window.toArabic=f}();
