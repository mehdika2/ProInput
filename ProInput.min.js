// +========================================+
// |       Besmellah, Alrahman, Alrahim     |
// |              Pro Input JS              |
// |  https://github.com/mehdika2/ProInput  |
// +========================================+
!function(){const i="data-pi-type",a="data-pi-max-length";function p(e,t,a=""){""==a&&(a=i);e=e.getAttribute(a);return e&&!!e.split(" ").includes(t)}const l=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],n=["0","1","2","3","4","5","6","7","8","9"],u=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function s(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".farsi")&&s(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(n.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),l[t])}),u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),l[t])}))}function v(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".english")&&v(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(l.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),n[t])}),u.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),n[t])}))}function g(a){"FORM"===a.nodeName?a.querySelectorAll("input").forEach((e,t)=>{p(e,".arabic")&&g(e),p(e,".noseparator")&&(e.value=e.value.replaceAll(",",""))}):(n.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}),l.forEach((e,t)=>{a.value=a.value.replace(new RegExp(e,"g"),u[t])}))}window.submit=function(){document.querySelector("form").submit()},window.ProInputInit=function(r){const o=document.querySelectorAll("input"),e=[];function t(e){var t=e.target,a=t.getAttribute("data-pi-allowed")??"";t.value=t.value.replaceAll(new RegExp(`[^\\u06F0-\\u06F9\\u0660-\\u06690-9${a}]`,"g"),""),c(e)}function c(e){var e=e.target;p(e,"farsi")?s(e):p(e,"arabic")?g(e):p(e,"english")&&v(e),p(e,"separate")&&(e.value=[...[...e.value.replaceAll(",","")].reverse().join("").replace(/(.{3})/g,"$1,").replace(/,\s*$/,"")].reverse().join("")),e.hasAttribute(a)&&(p(e,"separate")?e.value.replaceAll(",","").length>=Number(e.getAttribute(a)):e.value.length>=Number(e.getAttribute(a)))&&(e.value=e.value.substring(0,e.value.length-1),e=o[e.tabIndex])&&(e.focus(),e.select())}o.forEach((l,n)=>{l.tabIndex=n+1;const u=l.closest("form");null!=l.getAttribute(i)&&l.getAttribute(i).match(/\..*?\s/g)&&!e.includes(u)&&(u.addEventListener("submit",function(e){s(u),v(u),g(u)}),e.push(u)),p(l,"onlynumber")?l.addEventListener("input",t):p(l,"number")&&l.addEventListener("input",c),(p(l,"backjump")||p(l,"jump"))&&l.addEventListener("keydown",e=>{var t,a;p(l,"backjump")&&"Backspace"===e.key&&""===l.value&&0<n&&((t=o[n-1]).focus(),a=(t=t).value.length,t.setSelectionRange(a,a),t.focus(),e.preventDefault()),!p(l,"jump")||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),(a=o[n+1])?a.focus():"function"!=typeof r||0!=r()&&!u||u.submit())})})},window.toPersian=s,window.toEnglish=v,window.toArabic=g}();
